# Cramits_Keep
Player Controls: This script is the primary script for controlling all aspects of the player, it allows for movement and combat functions. it's derived Player Upgrades script holds values of any upgrade type such as stats or powers and allows these upgrades to be pickedup, the script allows has access to Player Ability Manager allowing for the usage of abilities based on a string value that is held. Within fixed update, player controls manages the player animation controller and uses a specially designed wheel method to allow for the walking animations to function relative to player movement direction and mouse position. Numerous scripts link to and access parts of Player Controls through the Player Controls Link script, this allows functions in game such as gaining upgrades or taking damage to function.


Player Ability Manager: This script holds all player abilities and their relative variables, when the player uses an ability button it will send the string name of the ability, the ability manager will use the string to call the relative ability function. Once called the ability does its respective function along with some base functions shared by all of them such as animation, sound and cooldown activation. An example of a unique ability function is combustion, this ability will search the room for targets and find the nearest one, once found it will activate the combust status effect on the target, if it failed to find a usable target then the ability enters a half duration cooldown. Another ability is dodge, this will fire a ray in the direction of the player's movement up to 7 units, if the ray hits a target then the player will teleport to that position, if the ray manages to travel 7 units then the player teleports to the end position.


Player Upgrades: This script manages the interactions of upgrade items and the player, Player Controls derives itself from this script and uses its public variables. When a stat item is picked up it calls a function that will update the respective stat based on the pickup and complete and relative equations for the result. Picking up a power will run a method that checks the power type and call that method, the method will add the string name of the power to the player’s active power list, if the power was picked up before it will instead change the prefix and run an alternate method to add to that powers total counter and run its math functions, all powers also run a UI designation method, this function calls the UpgradeUIScript and place the power image and counter on the next available space in the UI. Picking up an ability runs the AbilitySwapMenu which shows an interactable menu to choose what ability to replace and each ability's function.


AW Boss AI: This script is the primary controller of the boss in game, it includes variables for each attack the boss can use and functions to control the bosses combat abilities. Based on the amount of kills on the boss the player has in a run the boss will gain new attacks that get mixed in with current abilities. During the fight the boss uses a rage mechanic, this feature will increase attack speed over time and apply special abilities at every ⅓ mark of 100, these abilities include shattering the pillars, placing a permanent damage zone on the outer area and double the dart attack creation. The boss runs a permanent combat loop while alive, this loop will run distance checks which can change the bosses active combat mode also, for each loop this runs it gets closer to using the enclosure attack which locks down 2/3s of the playable area for a short time. The bosses combat modes change based on range and will allow for certain combat abilities fitting for ranged or melee combat, these modes also change movement and rotational values while active.


Room Mechanics: This script controls each room and the various interactions they have with the enemies and player. On startup each room processes the location of spawn points, entrances and exits along with what types of enemies can spawn inside. When the player enters a room it runs an enemy spawning function based on the derived EnemySpawnSystem script. When an enemy is killed they each call a function to update the list and similar enemy count trackers, once the counter is a 3 or less it creates an enemy pointer object which guides the player to the last few enemies. Once the player clears the room all exit doors unlock and become usable while also displaying what upgrade item the next room offers, an upgrade object will spawn near the doors and a loot pointer spawns to guide the player to the item and exit doors. If the room is marked as a boss room then the room will instead spawn the boss and change to boss music, additionally the boss script is given data on the center point and drop block objects for various mechanics.
